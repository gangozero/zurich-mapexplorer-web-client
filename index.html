<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>MapExplorer Profile View</title>
        
        <link rel="stylesheet" href="main.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
    </head>

    <script src="https://unpkg.com/jquery@3.1.0"></script>  
    <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script> 
      
    <body>

        <table border="0" width="1000" align="center">
                <tbody><tr>
                    <td colspan="2"><h1>MapExplorer : Commander Spok's Profile</h1></td>
                </tr>
                <tr>
                    <td width="200" valign="top" align="center">
                        <img id="userphoto" src="userphoto.jpg" border="0">
                        <div>XP: 34228</div>
                    </td>
                    <td>
                        <div id="mapid"></div>
                    </td>
                </tr>
        </tbody></table>    
         
       
    
    <script>
function addSquare(map,lat,lon,heat)
{
  var rcolor = '#E6160B';
  if(heat <= 10) rcolor = '#E8D500';
  if(heat <= 2) rcolor = '#08E800';

  var polygon = L.polygon([
            [lat,lon],
            [lat+0.001,lon],
            [lat+0.001,lon+0.0015],
            [lat,lon+0.0015]
        ],{color: rcolor , weight: 1}).addTo(map);
}

function getUserSquares()
{
   
   $.ajax({
    url: 'https://dbvmcgu4i2.execute-api.eu-west-1.amazonaws.com/prod/map',
    dataType: 'jsonp',
    jsonp: false,
    jsonpCallback: 'content',
    data: {id:'user1',token:'123'},
}).done(function (data) {
    console.log(data);
});
}

$(document).ready(function(){

		var mymap = L.map('mapid').setView([47.389855, 8.517995], 15);

        console.log(mymap);
/*
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(mymap);*/
        var CartoDB_DarkMatterNoLabels = L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
}).addTo(mymap);
   
   getUserSquares();
        
addSquare(mymap,47.36766423537108, 8.526935577392578,1);
addSquare(mymap,47.36766423537108+0.001, 8.526935577392578+0.0015,10);
addSquare(mymap,47.36766423537108+0.002, 8.526935577392578+0.0015,100);
});

	</script>

    </body></html>